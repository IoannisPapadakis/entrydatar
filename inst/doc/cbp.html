<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Erik Loualiche" />

<meta name="date" content="2018-04-18" />

<title>Download data from the County Business Pattern (CBP)</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#header {
text-align: center;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; }  code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>

</head>

<body>




<h1 class="title toc-ignore">Download data from the County Business Pattern (CBP)</h1>
<h4 class="author"><em>Erik Loualiche</em></h4>
<h4 class="date"><em>2018-04-18</em></h4>



<p>We download data from the County Business Pattern (CBP). Data is available for the period from 1986 to 2014 at an annual frequency.<br />
The most detailed cut of the data incorporates size, country and industry (4 digits) employment and businesses.<br />
The data is directly retrieved from the Census <a href="http://www.census.gov/programs-surveys/cbp.html">website</a></p>
<p>For example if we would like the raw data:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(entrydatar)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">dt_raw &lt;-<span class="st"> </span><span class="kw">download_all_cbp</span>(<span class="dv">1990</span>, <span class="dv">1990</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">dt_raw</a></code></pre></div>
<p>The data is by default aggregated at the county level. I allow different level of aggregations using variable <code>aggregation_level</code>. The <code>aggregation_level</code> variable is detailed in a table below. Calling variable without the default is now:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">dt_county_level   &lt;-<span class="st"> </span><span class="kw">download_all_cbp</span>(<span class="dv">1990</span>, <span class="dv">1990</span>,</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">                                      <span class="dt">aggregation_level =</span> <span class="st">&quot;county&quot;</span>)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">dt_national_level &lt;-<span class="st"> </span><span class="kw">download_all_cbp</span>(<span class="dv">1990</span>, <span class="dv">1990</span>,</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">                                      <span class="dt">aggregation_level =</span> <span class="st">&quot;US&quot;</span>)</a></code></pre></div>
<section id="some-more-information-about-data-layout-and-availability" class="level3">
<h3>Some more information about data layout and availability</h3>
<ul>
<li>By Geography:
<ul>
<li>Metro area data start with 1993.</li>
<li>ZIP Code data start with 1994</li>
<li>Congressional District data started in 2013.</li>
<li>LFO breakout for States starts with 2010.</li>
<li>Island Area data and LFO breakout for U.S. start with 2008.</li>
<li>Puerto Rico data start with 1998.</li>
</ul></li>
<li>By Industry:
<ul>
<li>4-digit SIC code from 1986 to 1997</li>
<li>6-digit NAICS code from 1998 to 2014. New flags added after 2007.</li>
</ul></li>
</ul>
<table>
<tbody>
<tr class="odd">
<td>| Variable Name | Description |</td>
</tr>
<tr class="even">
<td>|—————————|———————————-|</td>
</tr>
<tr class="odd">
<td>| | |</td>
</tr>
<tr class="even">
<td>| Variable | |</td>
</tr>
<tr class="odd">
<td>| <code>emp</code> | Total Mid-March Employees |</td>
</tr>
<tr class="even">
<td>| <code>qp1</code> | First Quarter Payroll ($1,000) |</td>
</tr>
<tr class="odd">
<td>| <code>ap</code> | Total Annual Payroll ($1,000) |</td>
</tr>
<tr class="even">
<td>| <code>est</code> | Total Number of establishments |</td>
</tr>
<tr class="odd">
<td>| | |</td>
</tr>
<tr class="even">
<td>| Size | |</td>
</tr>
<tr class="odd">
<td>| <code>N1_4</code> | 1-4 Employee Size Class |</td>
</tr>
<tr class="even">
<td>| <code>N5_9</code> | 5-9 Employee Size Class |</td>
</tr>
<tr class="odd">
<td>| <code>N10_19</code> | 10-19 Employee Size Class |</td>
</tr>
<tr class="even">
<td>| <code>N20_49</code> | 20-49 Employee Size Class |</td>
</tr>
<tr class="odd">
<td>| <code>N50_99</code> | 50-99 Employee Size Class |</td>
</tr>
<tr class="even">
<td>| <code>N100_249</code> | 100-249 Employee Size Class |</td>
</tr>
<tr class="odd">
<td>| <code>N250_499</code> | 250-499 Employee Size Class |</td>
</tr>
<tr class="even">
<td>| <code>N500_999</code> | 500-999 Employee Size Class |</td>
</tr>
<tr class="odd">
<td>| <code>N1000</code> | 1000 or More Employee Size Class |</td>
</tr>
<tr class="even">
<td>| <code>N1000_1</code> | 1000-1499 Employee Size Class |</td>
</tr>
<tr class="odd">
<td>| <code>N1000_2</code> | 1500-2499 Employee Size Class |</td>
</tr>
<tr class="even">
<td>| <code>N1000_3</code> | 2500-4999 Employee Size Class |</td>
</tr>
<tr class="odd">
<td>| <code>N1000_4</code> | 5000 or More Employee Size Class |</td>
</tr>
<tr class="even">
<td>| | |</td>
</tr>
<tr class="odd">
<td>| Flags | |</td>
</tr>
<tr class="even">
<td>| <code>empflag</code> | Size class replaced withheld |</td>
</tr>
<tr class="odd">
<td>| | emp and payroll replaced by 0 |</td>
</tr>
<tr class="even">
<td>| <code>fipstate</code> | FIPS State Code |</td>
</tr>
<tr class="odd">
<td>| <code>fipcscty</code> | FIPCS County Code |</td>
</tr>
<tr class="even">
<td>| <code>censtate</code> | Census State Code |</td>
</tr>
<tr class="odd">
<td>| <code>cencty</code> | Census County Code |</td>
</tr>
</tbody>
</table>
<p>Informative flags are the <code>empflag</code> about data suppression. It denotes employment size class for data withheld to avoid disclosure (confidentiality) or withheld because data do not meet publication standards. The aggregate size class is indicated by letters from <code>a</code> to <code>m</code>. <code>lfo</code> informs about the legal organizational form of the firms considered. Definitions of the flags are in the following table:</p>
<table>
<tbody>
<tr class="odd">
<td>| Data Flag | Description |</td>
</tr>
<tr class="even">
<td>|—————————-|—————————————-|</td>
</tr>
<tr class="odd">
<td>| | |</td>
</tr>
<tr class="even">
<td>| Employment Flag | |</td>
</tr>
<tr class="odd">
<td>| <code>EMPFLAG</code> | |</td>
</tr>
<tr class="even">
<td>| <code>a</code> | 0-19 |</td>
</tr>
<tr class="odd">
<td>| <code>b</code> | 20-99 |</td>
</tr>
<tr class="even">
<td>| <code>c</code> | 100-249 |</td>
</tr>
<tr class="odd">
<td>| <code>e</code> | 250-499 |</td>
</tr>
<tr class="even">
<td>| <code>f</code> | 500-999 |</td>
</tr>
<tr class="odd">
<td>| <code>g</code> | 1,000-2,499 |</td>
</tr>
<tr class="even">
<td>| <code>h</code> | 2,500-4,999 |</td>
</tr>
<tr class="odd">
<td>| <code>i</code> | 5,000-9,999 |</td>
</tr>
<tr class="even">
<td>| <code>j</code> | 10,000-24,999 |</td>
</tr>
<tr class="odd">
<td>| <code>k</code> | 25,000-49,999 |</td>
</tr>
<tr class="even">
<td>| <code>l</code> | 50,000-99,999 |</td>
</tr>
<tr class="odd">
<td>| <code>m</code> | 100,000 or More |</td>
</tr>
<tr class="even">
<td>| | |</td>
</tr>
<tr class="odd">
<td>| Legal Form of Organization | |</td>
</tr>
<tr class="even">
<td>| <code>LFO</code> | |</td>
</tr>
<tr class="odd">
<td>| <code>-</code> | All Establishments |</td>
</tr>
<tr class="even">
<td>| <code>C</code> | Corporations |</td>
</tr>
<tr class="odd">
<td>| <code>Z</code> | S-Corporations |</td>
</tr>
<tr class="even">
<td>| <code>S</code> | Sole Proprietorships |</td>
</tr>
<tr class="odd">
<td>| <code>P</code> | Partnernhips |</td>
</tr>
<tr class="even">
<td>| <code>N</code> | Non-Profits |</td>
</tr>
<tr class="odd">
<td>| <code>G</code> | Government |</td>
</tr>
<tr class="even">
<td>| <code>O</code> | Other |</td>
</tr>
<tr class="odd">
<td>| | |</td>
</tr>
<tr class="even">
<td>| Noise Flag | |</td>
</tr>
<tr class="odd">
<td>| <code>EMP_NF</code> | Total Mid-March Employees Noise Flag |</td>
</tr>
<tr class="even">
<td>| <code>QP1_NF</code> | Total First Quarter Payroll Noise Flag |</td>
</tr>
<tr class="odd">
<td>| <code>AP_NF</code> | Total Annual Payroll Noise Flag |</td>
</tr>
<tr class="even">
<td>| <code>G</code> | 0 to &lt; 2% noise (low noise) |</td>
</tr>
<tr class="odd">
<td>| <code>H</code> | 2 to &lt; 5% noise (low noise) |</td>
</tr>
<tr class="even">
<td>| <code>D</code> | |</td>
</tr>
<tr class="odd">
<td>| <code>D</code> | Withheld (see records layout) |</td>
</tr>
<tr class="even">
<td>| <code>S</code> | Withheld (see records layout) |</td>
</tr>
</tbody>
</table>
</section>
<section id="to-download-different-version-of-the-dataset-the-match-is" class="level2">
<h2>To Download different version of the dataset the match is:</h2>
<table>
<thead>
<tr class="header">
<th>Aggregation Argument</th>
<th>Description</th>
<th>Data layout</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>county</code></td>
<td>county level (default)</td>
<td></td>
</tr>
<tr class="even">
<td><code>US</code></td>
<td>national</td>
<td><a href="../tables/us_lfo_layout.txt">US</a></td>
</tr>
<tr class="odd">
<td><code>MSA</code></td>
<td>metropolitan area</td>
<td><a href="../tables/metro_area_layout,txt">MSA</a></td>
</tr>
<tr class="even">
<td><code>state</code></td>
<td>state level</td>
<td><a href="../tables/state_x_lfo_layout.txt">State</a></td>
</tr>
</tbody>
</table>
<hr />
<hr />
<p>For something a bit tidier we gather the data around year, geography, industry and size. <em>Not yet implemented</em>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># dt_tidy &lt;- entrydatar::tidy_cbp(dt_raw, 1990, 1990)</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co"># dt_tidy</span></a></code></pre></div>
<hr />
<ol start="3" type="a">
<li>Erik Loualiche</li>
</ol>
</section>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
